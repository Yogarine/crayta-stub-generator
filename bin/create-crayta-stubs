#!/usr/bin/env php
<?php

declare(strict_types=1);

use Yogarine\CraytaStubs\CraytaStubGenerator;

if (file_exists(__DIR__ . '/../../../autoload.php')) {
    /** @noinspection PhpIncludeInspection */
    require_once __DIR__ . '/../../../autoload.php';
} else {
    require_once __DIR__ . '/../vendor/autoload.php';
}

$targetDir = getcwd() . '/stubs';

$copyStaticStubs = true;
if (in_array("--skip-static-stubs", $argv, true) || in_array("-S", $argv, true)) {
    echo "Note: static stubs are not being copied over." . PHP_EOL;
} else {
    echo "Copying static Crayta stubs to '{$targetDir}'...";
    CraytaStubGenerator::copyStaticStubs($targetDir);
    echo " Done!" . PHP_EOL;
}

echo "Generating Crayta stubs in {$targetDir}...";
$craytaStubGenerator = new CraytaStubGenerator();
$craytaStubGenerator->generateStubs($targetDir);
echo " Done!" . PHP_EOL;
